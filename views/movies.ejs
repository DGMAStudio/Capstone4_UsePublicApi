<%- include('partials/header.ejs') %>


<section id="movies">
  <%if(locals.movies[0]){%>
    <div class="container my-5">
  <div class="row row-cols-1 row-cols-md-3 g-4">
    <% movies.forEach(function(movie) { %>
      <div class="col">
        <div class="card h-100">
          <img src="<%= movie.poster %>" class="card-img-top" alt="<%= movie.title %> poster" style="height: 400px; object-fit: cover;">
          <div class="card-body">
            <h5 class="card-title"><%= movie.title %></h5>
            <p class="card-text"><%= movie.plot %></p>
            <p class="card-text rating"><strong>Your Rating:</strong> ‚≠ê <%= movie.yourRating %>/10</p>
            <div style="display: flex;">
                <form action="/showmovie" method="get" style="margin-right:10px">
                    <input type="hidden" name="yourTitle" value="<%= movie.title %>">
                    <button type="submit" class="movie-btn view-btn">View Details</button>
                </form>
                <form action="/update" method="get" style="margin-right:10px">
                    <input type="hidden" name="yourTitle" value="<%= movie.title %>">
                    <button type="submit" class="movie-btn upd-btn">Update Rating</button>
                </form>
                <form action="/delete" method="post" >
                    <input type="hidden" name="yourTitle" value="<%= movie.title %>">
                    <button type="submit" class="movie-btn dlt-btn">Delete</button>
                </form>
            </div>
          </div>
        </div>
      </div>
    <% }); %>
  </div>
</div>
  <%}else{%>
    <div class="no-movies">
    <h1>Oops!!! No movies yet!!!</h1>
    <p>Add some using the search bar on the top!!!</p>
    </div>
  <%}%>
    
</section>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.6/dist/js/bootstrap.bundle.min.js" 
integrity="sha384-j1CDi7MgGQ12Z7Qab0qlWQ/Qqz24Gc6BM0thvEMVjHnfYGF0rmFCozFSxQBxwHKO" 
crossorigin="anonymous"></script>
</body>
</html>